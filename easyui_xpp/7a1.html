<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>添加合同</title>
	
	<!-- <script type="text/javascript" src="../xppjs/jquery.js"></script> -->
	<script type="text/javascript" src="jquery-easyui-136/jquery.min.js"></script>
	<script type="text/javascript" src="jquery-easyui-136/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="jquery-easyui-136/locale/easyui-lang-zh_CN.js"></script>
	<script type="text/javascript" src="../xppjs/jquery.serialize-object.js"></script>
	
	<link   rel="stylesheet" type="text/css" href="jquery-easyui-136/themes/gray/easyui.css"/>
	<link   rel="stylesheet" type="text/css" href="jquery-easyui-136/themes/icon.css"/>


	<script>
		

		// function submitForm(){
		// 	//$('#ff').form('submit');
		// 	var param = $("#ff").serializeObject();
		// 	param.sumPriceA = document.getElementById("sumPriceA").value;
		// 	param.sumCountA = document.getElementById("sumCountA").value;
		// 	param.sumPriceB = document.getElementById("sumPriceB").value;
		// 	param.sumCountB = document.getElementById("sumCountB").value;
		// 	param.totalPrice = document.getElementById("totalPrice").value;
		// 	param.totalCount = document.getElementById("totalCount").value;
		// 	$.ajax({
				
		// 		url:"/sdpk/aaContract?qqiu=add",
		// 		type: "POST",
		// 		//data: JSON.stringify(param),
		// 		data: JSON.stringify(param),
		// 		contentType: "application/json;charset=UTF-8", 
		// 		success:function(result){
		// 		alert("新增成功");
		// 		}
			 
		// 	});
			
		// }//end function submitForm
		// 
		

		//验证第一二行中的3个输入框
		function yzV1(){
				var m = {};
				// m=document.getElementsByTagName("input");
				m=document.getElementsByClassName("v1g3");

				for(var i=0;i<m.length;i++)
				{
						if(m[i].value==""||m[i].value==null)
						{
							alert("请填写输入框的值(前两行)"+m[i].id);
							return false;
						}
				}//end for
				console.log("合同前两行输入框验证，有值！！");
				return true;
			}
		//验证日期输入框
		function yzDate(){
				var m = {};
				// m=document.getElementsByTagName("input");
				m=document.getElementById("cDate");
				var c1 = $("#cDate").datebox("getValue");

				
						if(c1==""||c1==null)
						{
							alert("请填写日期框"+c1+"的值");
							return false;
						}
				console.log("日期验证，有值！"+c1);
				return true;
			}
			//验证6个数字框
			function yzNumBox(){
				var m = {};
				// m=document.getElementsByTagName("input");
				m=document.getElementsByClassName("easyui-numberbox");

				for(var i=0;i<m.length;i++)
				{
						if(m[i].value==""||m[i].value==null)
						{
							alert("请填写数字输入框的值(类型中)"+m[i].id);
							return false;
						}
				}//end for
				console.log("6个数字输入框验证，有值！");
				return true;
			}


		function submitForm(){
			//$('#ff').form('submit');
			var f1=yzV1();
			var f2=yzDate();
			var f3=yzNumBox();
			var flag = false;
			if(f1==true&&f2==true&&f3==true){flag = true;}
			if (flag) {
			var param = $("#ff").serializeObject();
			param.sumPriceA = document.getElementById("sumPriceA").value;
			param.sumCountA = document.getElementById("sumCountA").value;
			param.sumPriceB = document.getElementById("sumPriceB").value;
			param.sumCountB = document.getElementById("sumCountB").value;
			param.totalPrice = document.getElementById("totalPrice").value;
			param.totalCount = document.getElementById("totalCount").value;
			$.ajax({
				
				url:"/sdpk/aaContract?qqiu=add",
				type: "POST",
				//data: JSON.stringify(param),
				data: JSON.stringify(param),
				contentType: "application/json;charset=UTF-8", 
				success:function(result){
				alert("新增成功");
				//调用父级弹窗start
            	var $parent = self.parent.$;
            	$parent('#menu_g2').click();
        		//调用父级弹窗end
				}
			 
			});

			}else{
				alert("补填后，再点击!");
			}
			
			
			
		}//end function submitForm

		function clearForm(){
			$('#ff').form('clear');
		};//end function clearForm


		//类型一（价格A）输入框3个触发事件
		function cn_onePriceA() {
			var p1 = document.getElementById("onePriceA").value;
			var c1 = document.getElementById("countA").value;
			var d1 = document.getElementById("delPriceA").value;

			var result = new Number(p1) + new Number(c1) + new Number(d1);
			document.getElementById("sumPriceA").value = new Number(p1) * new Number(c1) - new Number(d1);
		}

		function cn_countGiveA() {
			var c1 = document.getElementById("countA").value;
			var cg1 = document.getElementById("countGiveA").value;

			var result = new Number(c1) + new Number(cg1);
			document.getElementById("sumCountA").value = new Number(c1) + new Number(cg1);
		}

		function countA_cn() {
			var p1 = document.getElementById("onePriceA").value;
			var c1 = document.getElementById("countA").value;
			var d1 = document.getElementById("delPriceA").value;

			var result = new Number(p1) + new Number(c1) + new Number(d1);
			document.getElementById("sumPriceA").value = new Number(p1) * new Number(c1) - new Number(d1);

			var c2 = document.getElementById("countA").value;
			var cg2 = document.getElementById("countGiveA").value;

			var result2 = new Number(c2) + new Number(cg2);
			document.getElementById("sumCountA").value = new Number(c2) + new Number(cg2);
		}

		//类型二（价格B）输入框3个触发事件

		function cn_onePriceB() {
			var p1 = document.getElementById("onePriceB").value;
			var c1 = document.getElementById("countB").value;
			var d1 = document.getElementById("delPriceB").value;

			var result = new Number(p1) + new Number(c1) + new Number(d1);
			document.getElementById("sumPriceB").value = new Number(p1) * new Number(c1) - new Number(d1);
		}

		function cn_countGiveB() {
			var c1 = document.getElementById("countB").value;
			var cg1 = document.getElementById("countGiveB").value;

			var result = new Number(c1) + new Number(cg1);
			document.getElementById("sumCountB").value = new Number(c1) + new Number(cg1);
		}

		function countB_cn() {
			var p1 = document.getElementById("onePriceB").value;
			var c1 = document.getElementById("countB").value;
			var d1 = document.getElementById("delPriceB").value;

			var result = new Number(p1) + new Number(c1) + new Number(d1);
			document.getElementById("sumPriceB").value = new Number(p1) * new Number(c1) - new Number(d1);

			var c2 = document.getElementById("countB").value;
			var cg2 = document.getElementById("countGiveB").value;

			var result2 = new Number(c2) + new Number(cg2);
			document.getElementById("sumCountB").value = new Number(c2) + new Number(cg2);
		}

		//最后总金额，总次数触发

		function cn_totalPrice() {
			var sumA = document.getElementById("sumPriceA").value;
			var sumB = document.getElementById("sumPriceB").value;

			var result = new Number(sumA) + new Number(sumB);
			// alert(result);
			document.getElementById("totalPrice").value = new Number(sumA) + new Number(sumB);

			var scA = document.getElementById("sumCountA").value;
			var scB = document.getElementById("sumCountB").value;
			var result = new Number(scA) + new Number(scB);
			// alert(result);
			document.getElementById("totalCount").value = new Number(scA) + new Number(scB);
			alert("总支付，总次数已更新");
		}




	</script>

	

	<style type="text/css">
		*{
    		font-family:"黑体";
    	}
	</style>
</head>
<body>
	
	<div id="fen_container"  style="width:977px;height: 690px;background-color:#FFFFFF;"> 

		<div id="ye_1_blank" style="background-color:#FFFFFF;width:977px;height:14px;float:left;"></div>
		<div id="ye_2_blank" style="background-color:#FFFFFF;width:54px;height:636px;float:left;"></div>

		<div id="ye_3_text_container" style="box-sizing:border-box;background-color:#FFFFFF;width:923px;height:636px;float:left;">
			<div id="header_1" style="background-color:#FFFFFF;width:923px;height: 28px;float:left;">
            <strong style="float:left;box-sizing:border-box;font-size:24px;margin-bottom:0;text-align:left;">新增合同</strong></div>

            <div id="header_2" style="background-color:#FFFFFF;width:923px;height: 1px;float:left;border-style:solid; border-bottom-width:1px;border-left: none;border-top: none;border-right: none;">
            </div>

            <!-- 留空 --> <div style="width: 923px;height: 20px;float:left;"></div>

            <div id="header_3_form" style="background-color:#FFFFFF;width:923px;height: 560px;float:left;">
            	<form id="ff" method="post" > 
            		<table id="header_3_tb1"  style="float:left;box-sizing:border-box;margin-bottom:0;border-collapse:collapse">
            		<!-- 第一行 -->
            		<tr>
	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:90px;height:39px;box-sizing:border-box;font-size:16px;color: red;">合同编号</td>
	    			<td><input  type="text" id="cNum" name="cNum" class="v1g3" style="height: 39px;width: 841px;font-size:16px;" value="输入合同编号"></td>
	    			</tr>
	    			<!-- 第一行结束 -->

	    			<!-- 中间划线 -->
	    			<tr style="width:923px;height: 8px; border-style:none; border-bottom-width:1px;
						border-left: none;border-top: none;border-right: none;"></tr>
	    			<!-- 中间划线结束 -->
					<!-- 留空开始 -->
	    			<tr style="width:923px;height: 5px; "></tr>
					<!-- 留空结束 -->

            		</table> <!-- end id为 header_3_tb1 -->

	    		<table id="header_3_tb2"  style="float:left;box-sizing:border-box;margin-bottom:0;border-collapse:collapse">
            		<!-- 第一行 -->
            		<tr>
	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">学生名称</td>
	    			<td><input  type="text" id="stuUuid" name="stuUuid" class="v1g3" style="height: 39px;width: 194px;font-size:16px;" value="请选择学生"> </td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">交易时间</td>
	    			<td style="width: 115px;height: 27px;font-size:16px;"><input id="cDate" name="cDate" type="text" class="easyui-datebox" required="required" style="height: 39px;width: 194px;font-size:16px;" ></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">校区组织</td>
	    			<td><input  type="text" id="org" name="org" class="v1g3" style="height: 39px;width: 194px;font-size:16px;" value="请输入校区组织"> </td>
	    			</tr>
	    			<!-- 中间划线 -->
	    			<tr style="width:923px;height: 8px; border-style:solid; border-bottom-width:1px;
						border-left: none;border-top: none;border-right: none;"></tr>
	    			<!-- 中间划线结束 -->

	    			<!-- 留空开始 -->
	    			<tr style="width:923px;height: 18px; "></tr>
					<!-- 留空结束 -->
            		</table><!-- end  id= header_3_tb2 -->

            		<!-- 划线说明 -->
            		<div style="background-color:#FFFFFF;width:923px;height: 28px;float:left;border-style:none; border-bottom-width:1px;border-left: none;border-top: none;border-right: none;">
            		<strong style="float:left;box-sizing:border-box;font-size:16px;margin-bottom:0;text-align:left;">金额(1200类型)</strong>
            		</div><!-- 划线说明结束 -->


            		<table id="header_3_tb3"  style="float:left;box-sizing:border-box;margin-bottom:0;border-collapse:collapse">
            		<!-- 类型一(价格A)第一行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">单价</td>
	    			<td>
                        <select id="onePriceA"  name="onePriceA" onchange="cn_onePriceA();" style="height: 39px;width: 194px;font-size:16px;"  required="required">
                            <option value="0">0</option>
                            <option value="1200">1200</option>
                        </select>
            		</td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">数量</td>
	    			<td ><input id="countA" name="countA" class="easyui-numberbox" style="height: 39px;width: 194px;font-size:16px;" required="required" data-options="min:0,max:999999,value: 0,editable:true" onchange="countA_cn();"></td>
            		</tr><!-- 第一行结束 -->
            		<!--类型一(价格A) 第二行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">优惠金额</td>
	    			<td ><input id="delPriceA" name="delPriceA" class="easyui-numberbox" style="height: 39px;width: 194px;font-size:16px;" required="required" data-options="min:0,max:999999,value: 0,editable:true" onchange="cn_onePriceA();"></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">送课次数</td>
	    			<td ><input id="countGiveA" name="countGiveA" class="easyui-numberbox" style="height: 39px;width: 194px;font-size:16px;" required="required" data-options="min:0,max:999999,value: 0,editable:true" onchange="cn_countGiveA();"></td>
            		</tr><!-- 第二行结束 类型一(价格A)-->
            		<!-- 中间划线 -->
	    			<tr style="width:923px;height: 8px; border-style:dashed; border-bottom-width:1px;
						border-left: none;border-top: none;border-right: none;"></tr>
	    			<!-- 中间划线结束 -->

	    			<!-- 留空开始 -->
	    			<tr style="width:923px;height: 18px; "></tr>
					<!-- 留空结束 -->
					<!--类型一(价格A) 第三行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: #3CDA9E;">支付金额</td>
	    			<td ><input id="sumPriceA" name="sumPriceA"  class="easyui-textbox" style="height: 39px;width: 194px;font-size:16px;" required="required"  disabled="true" value="0"></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: #3CDA9E;">上课次数</td>
	    			<td ><input id="sumCountA" name="sumCountA" class="easyui-textbox" style="height: 39px;width: 194px;font-size:16px;" required="required"  disabled="true" value="0"></td>
            		</tr><!-- 第三行结束 -->
            		</table><!-- end id  header_3_tb3-->

            		<!-- 划线 -->
            		<div id="header_2" style="background-color:#FFFFFF;width:923px;height: 8px;float:left;border-style:solid; border-bottom-width:1px;border-left: none;border-top: none;border-right: none;">
            		</div><!-- 划线结束 -->

            <!-- 留空 --> <div style="width: 923px;height: 10px;float:left;"></div>

            <!-- 划线说明 -->
            		<div style="background-color:#FFFFFF;width:923px;height: 28px;float:left;border-style:none; border-bottom-width:1px;border-left: none;border-top: none;border-right: none;">
            		<strong style="float:left;box-sizing:border-box;font-size:16px;margin-bottom:0;text-align:left;">金额(1500类型)</strong>
            		</div><!-- 划线说明结束 -->

            <table id="header_3_tb4"  style="float:left;box-sizing:border-box;margin-bottom:0;border-collapse:collapse">
            		<!-- 类型二(价格B)第一行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">单价</td>
	    			<td>
                        <select id="onePriceB"  name="onePriceB" onchange="cn_onePriceB();"  style="height: 39px;width: 194px;font-size:16px;">
                            <option value="0">0</option>
                            <option value="1500">1500</option>
                        </select>
            		</td>


	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">数量</td>
	    			<td ><input id="countB" name="countB" onchange="countB_cn();" class="easyui-numberbox" style="height: 39px;width: 194px;font-size:16px;" required="required" data-options="min:0,max:999999,value: 0,editable:true"></td>
            		</tr><!-- 第一行结束 -->
            		<!-- 类型二(价格B)第二行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color:red;">优惠金额</td>
	    			<td ><input id="delPriceB" name="delPriceB" onchange="cn_onePriceB();" class="easyui-numberbox" style="height: 39px;width: 194px;font-size:16px;" required="required" data-options="min:0,max:999999,value: 0,editable:true"></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">送课次数</td>
	    			<td ><input id="countGiveB" name="countGiveB" onchange="cn_countGiveB();" class="easyui-numberbox" style="height: 39px;width: 194px;font-size:16px;" required="required" data-options="min:0,max:999999,value: 0,editable:true"></td>
            		</tr><!-- 第二行结束 类型二(价格B)-->
            		<!-- 中间划线 -->
	    			<tr style="width:923px;height: 8px; border-style:dashed; border-bottom-width:1px;
						border-left: none;border-top: none;border-right: none;"></tr>
	    			<!-- 中间划线结束 -->

	    			<!-- 留空开始 -->
	    			<tr style="width:923px;height: 18px; "></tr>
					<!-- 留空结束 -->
					<!-- 类型二(价格B)第三行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: #3CDA9E;">支付金额</td>
	    			<td ><input id="sumPriceB" name="sumPriceB" class="easyui-textbox"  style="height: 39px;width: 194px;font-size:16px;" required="required"  disabled="true" value="0"></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: #3CDA9E;">上课次数</td>
	    			<td ><input id="sumCountB" name="sumCountB" class="easyui-textbox" style="height: 39px;width: 194px;font-size:16px;" required="required"  disabled="true" value="0"></td>
            		</tr><!-- 第三行结束 -->
            		</table><!-- end id  header_3_tb4-->

            		<!-- 划线 -->
            		<div style="background-color:#FFFFFF;width:923px;height: 8px;float:left;border-style:solid; border-bottom-width:1px;border-left: none;border-top: none;border-right: none;">
            		</div><!-- 划线结束 -->

            <!-- 留空 --> <div style="width: 923px;height: 10px;float:left;"></div>

            		<!-- 划线说明 -->
            		<div style="background-color:#FFFFFF;width:923px;height: 28px;float:left;border-style:none; border-bottom-width:1px;border-left: none;border-top: none;border-right: none;">
            		<strong style="float:left;box-sizing:border-box;font-size:16px;margin-bottom:0;text-align:left;">金额(1200类型+1500类型)</strong>
            		</div><!-- 划线说明结束 -->
            		<table id="header_3_tb4"  style="float:left;box-sizing:border-box;margin-bottom:0;border-collapse:collapse">
					<!-- 类型二(价格B)第三行 -->
            		<tr>
						<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">总支付</td>
	    			<td ><input id="totalPrice" name="totalPrice"  style="height: 39px;width: 194px;font-size:16px;" required="required"  disabled="true" value="0"></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;">总次数</td>
	    			<td ><input id="totalCount" name="totalCount"  style="height: 39px;width: 194px;font-size:16px;" required="required"  disabled="true" value="0"></td>

	    			<td style="height: 39px;width: 60px;background-color:#FFFFFF;"></td>

	    			<td align="center" style="text-align:left;background-color:#FFFFFF;width:70px;height:39px;box-sizing:border-box;font-size:16px;color: red;"></td>
	    			<td><a href="javascript:void(0)" class="easyui-linkbutton" style="background-color: #3CDA9E;height: 39px;width: 194px;font-size:16px;" onclick="cn_totalPrice()">计算按钮</a></td>
            		</tr><!-- 第三行结束 -->
            		</table><!-- end id  header_3_tb4-->

            	</form>
            	<!-- 按钮div开始 -->
            	

            	  <div style="text-align:center;position: absolute;top: 79%;left: 69%;padding:5px">
	    			<a href="javascript:void(0)" class="easyui-linkbutton" onclick="clearForm()">清空</a>
	    			<a href="javascript:void(0)" class="easyui-linkbutton" onclick="submitForm()">确认</a>
	   			 </div>

	   			 <!-- 按钮div结束 -->
            </div><!-- end div  header_3_form-->

		</div><!-- end div  ye_3_text_container-->


	</div><!-- end div  id="fen_container"-->
</body>
</html>